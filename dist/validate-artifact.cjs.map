{"version":3,"file":"validate-artifact.cjs","sources":["../src/core/validate-artifact.ts"],"sourcesContent":["/**\n * validate-artifact.ts\n * Validates the artifact input for the GitHub Action\n * Used as part of GitHub Action workflows to ensure correct artifact file is provided\n */\n\nimport * as core from '@actions/core';\nimport * as fs from 'node:fs';\nimport * as path from 'node:path';\n\n/**\n * Main function to validate the artifact input\n */\nexport function validateArtifact(): void {\n  // Get the artifact input from GitHub Action inputs\n  const artifact = core.getInput('artifact');\n\n  // Validate that the artifact input is provided\n  if (!artifact) {\n    core.setFailed(\"Input 'artifact' is required.\");\n    return;\n  }\n\n  // Validate that the artifact file exists\n  const artifactPath = path.resolve(artifact);\n  if (!fs.existsSync(artifactPath)) {\n    core.setFailed(`Artifact file does not exist at path: ${artifactPath}`);\n    return;\n  }\n\n  // Validate that the artifact is a .zip file (only zip format supported for now)\n  const validExtensions = ['.zip'];\n  const artifactExtension = path.extname(artifactPath).toLowerCase();\n  if (!validExtensions.includes(artifactExtension)) {\n    core.setFailed(`Artifact file must be one of the following types: ${validExtensions.join(', ')}`);\n    return;\n  }\n\n  // If all validations pass\n  core.info(\"Artifact validation passed.\");\n\n  // Set the artifact path as an output for use in subsequent steps\n  core.setOutput('artifact-path', artifactPath);\n}\n\n// Execute if called directly\nif (require.main === module) {\n  validateArtifact();\n}\n"],"names":["core","path","fs"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAaO,SAAS,mBAAyB;AAEvC,QAAM,WAAWA,gBAAK,SAAS,UAAU;AAGzC,MAAI,CAAC,UAAU;AACbA,oBAAK,UAAU,+BAA+B;AAC9C;AAAA,EACF;AAGA,QAAM,eAAeC,gBAAK,QAAQ,QAAQ;AAC1C,MAAI,CAACC,cAAG,WAAW,YAAY,GAAG;AAChCF,oBAAK,UAAU,yCAAyC,YAAY,EAAE;AACtE;AAAA,EACF;AAGA,QAAM,kBAAkB,CAAC,MAAM;AAC/B,QAAM,oBAAoBC,gBAAK,QAAQ,YAAY,EAAE,YAAA;AACrD,MAAI,CAAC,gBAAgB,SAAS,iBAAiB,GAAG;AAChDD,oBAAK,UAAU,qDAAqD,gBAAgB,KAAK,IAAI,CAAC,EAAE;AAChG;AAAA,EACF;AAGAA,kBAAK,KAAK,6BAA6B;AAGvCA,kBAAK,UAAU,iBAAiB,YAAY;AAC9C;AAGA,IAAI,QAAQ,SAAS,QAAQ;AAC3B,mBAAA;AACF;;"}